<div class="sf-gallery">
  <div class="sf-gallery__thumbs">
    <slot name="thumbs" v-bind="{ images, active: activeIndex, go }">
      <div
        v-for="(image, index) in images"
        :key="'img-' + index"
        class="sf-gallery__item"
        :class="{ 'sf-gallery__item--selected': index === activeIndex }"
        @click="go(index)"
      >
        <SfImage
          class="sf-gallery__thumb"
          :src="image.mobile.url"
          :width="imageWidth"
          :height="imageHeight"
          alt=""
        />
      </div>
    </slot>
  </div>
  <div class="sf-gallery__stage">
    <div ref="glide" class="glide">
      <div class="glide__track" data-glide-el="track">
        <ul class="glide__slides">
          <li
            v-for="(picture, index) in images"
            :key="'slide-' + index"
            class="glide__slide"
            @mouseover="startZoom(picture)"
            @mousemove="moveZoom($event, index)"
            @mouseout="removeZoom(index)"
          >
            <SfImage
              ref="sfGalleryBigImage"
              class="sf-gallery__big-image"
              :class="{ 'sf-gallery__big-image--has-zoom': enableZoom }"
              :src="picture.desktop.url"
              :alt="picture.alt"
              :width="imageWidth"
              :height="imageHeight"
              @click="$emit('click:stage', { picture, index })"
            />
          </li>
        </ul>
      </div>
    </div>
    <transition name="fade">
      <div
        v-if="outsideZoom && pictureSelected"
        ref="outSide"
        class="sf-gallery__zoom"
        :style="{ width: `${imageWidth}px`, height: `${imageHeight}px` }"
      >
        <SfImage
          ref="imgZoom"
          :src="pictureSelected"
          :width="imageWidth"
          :height="imageHeight"
          :lazy="false"
        />
      </div>
    </transition>
  </div>
</div>
