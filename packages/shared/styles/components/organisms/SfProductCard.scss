@import '../../variables';

$product-card-c-hover-shadow: css(product-card, c-hover-shadow, 0px 4px 35px rgba(168, 172, 176, .19));
$product-card-max-width: css(product-card, max-width, 200px);
$product-card-background: css(product-card, background, var(--c-white));
$product-card-padding: css(product-card, padding, var(--spacer-small));
$product-card-title-font: font(
  product-card-title,
  300,
  var(--font-size-regular),
  1.6,
  var(--body-font-family-secondary)
);

.sf-product-card {
  $this: &;
  position: relative;
  box-sizing: border-box;
  max-width: $product-card-max-width;
  padding: $product-card-padding;
  background-color: $product-card-background;
  &::after {
    content: "";
  }
  &:hover {
    #{$this}__picture {
      opacity: 0;
      &:nth-child(even) {
        opacity: 1;
      }
    }
    #{$this}__wishlist-icon {
      opacity: 1;
    }
    #{$this}__add-button {
      opacity: 1;
    }
  }
  @include for-desktop {
    --product-card-max-width: 240px;
    --product-card-padding: var(--spacer-big);
    &::after {
      transition: box-shadow 150ms ease-in-out;
    }
    &:hover {
      z-index: 1;
      &::after {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: -1;
        content: "";
        box-shadow: $product-card-c-hover-shadow;
      }
    }
  }
  &__link {
    outline: none;
  }
  &__title {
    font: css(product-card-title, font, $product-card-title-font);
    margin: css(product-card-title, margin, var(--spacer-small) 0);
    @include for-desktop {
      --product-card-title-margin: var(--spacer) 0 var(--spacer-small);
    }
  }
  &__image-wrapper {
    position: relative;
  }
  &__image,
  &__picture {
    transition: opacity 150ms ease-in-out;
    &:nth-child(even) {
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
    }
  }
  &__badge {
    position: absolute;
    top: css(product-card-badge, top, var(--spacer));
    left: 0;
  }
  &__add-button {
    display: none;
    @include for-desktop {
      --button-padding: var(--spacer-medium);
      position: absolute;
      cursor: pointer;
      transform: translateY(-50%);
      right: var(--spacer-medium);
      opacity: 0;
      display: flex;
      &--icons-enter-active {
        animation: bounce .4s;
      }
      &--icons-leave-active {
        animation: bounce .4s reverse;
      }
    }
  }
  &__reviews {
    display: flex;
    align-items: center;
  }
  &__rating {
    display: inline-flex;
  }
  &__reviews-count {
    font-size: css(reviews-count, font-size, var(--font-size-regular));
    margin-left: var(--spacer);
    @include for-desktop {
      --reviews-count-font-size:  var(--font-size-small);
    }
  }
  &__wishlist-icon {
    position: absolute;
    top: calc(#{$product-card-padding} * 4);
    right: calc(#{$product-card-padding} * 4);
    padding: 0;
    border: 0;
    background-color: transparent;
    cursor: pointer;
    outline: none;
    transition: opacity 150ms ease-in-out;
    &#{$this}--on-wishlist {
      opacity: 1;
    }
    @include for-desktop {
      opacity: 0;
      top: calc(#{$product-card-padding} * 2);
      right: calc(#{$product-card-padding} * 2);
    }
  }
}

@keyframes bounce {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
  }
}
